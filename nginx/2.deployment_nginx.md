
# ğŸ“– ì›¹ ì„œë²„(Web Server)ë€?


## âœ… ìš°ë¦¬ëŠ” ì–´ë–»ê²Œ ë„¤ì´ë²„ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ”ê±¸ê¹Œ?
- ì›¹ ì„œë²„(Web Server)ê°€ ë­”ì§€ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ”, ì–´ë–¤ ê³¼ì •ì„ ê±°ì³ì„œ ì›¹ ì‚¬ì´íŠ¸ì— ì ‘ì†í•  ìˆ˜ ìˆëŠ” ì§€ë¥¼ ë¨¼ì € ì´í•´í•´ì•¼ í•œë‹¤.

- ë„¤ì´ë²„ì— ì ‘ì†í•˜ê¸° ìœ„í•´ ì£¼ì†Œì°½ì— www.naver.com ì´ë¼ëŠ” ì£¼ì†Œë¥¼ ì…ë ¥í•œë‹¤.
- ê·¸ëŸ¬ë©´ www.naver.com ì´ë¼ëŠ” ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì°¾ì•„ ë“¤ì–´ê°€ëŠ” ê²ƒì²˜ëŸ¼ ëŠê»´ì§„ë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œ ì´ë ‡ê²Œ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.


## âœ… ì›¹ ì„œë²„(Web Server)ë€?
ì›¹ ì„œë²„(Web Server)ëŠ” ì‚¬ìš©ìì˜ ìš”ì²­(www.naver.comìœ¼ë¡œ ì ‘ì†í•˜ëŠ” í–‰ìœ„)ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ HTML, CSS, JS, ì´ë¯¸ì§€ì™€ ê°™ì€ íŒŒì¼ë“¤ì„ ì œê³µí•˜ëŠ” ì»´í“¨í„°ë¥¼ ì˜ë¯¸í•œë‹¤.

## âœ… Nginxì˜ ì›¹ ì„œë²„(Web Server) ê¸°ëŠ¥
NginxëŠ” ì›¹ ì„œë²„(Web Server) ì—­í• ì„ í•  ìˆ˜ ìˆë‹¤.

í’€ì–´ì„œ ì„¤ëª…í•˜ìë©´ Nginxê°€ ì‚¬ìš©ìì˜ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ íŒŒì¼(HTML, CSS, JS, ì´ë¯¸ì§€ ë“±)ì„ ì œê³µí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆë‹¤.

ë”°ë¼ì„œ Nginxë¥¼ í™œìš©í•˜ë©´ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ë°°í¬í•  ìˆ˜ ìˆë‹¤.

---

<br>
<br>
<br>

# ğŸ“– Nginx ê¸°ë³¸ ë¬¸ë²• í•´ì„í•˜ê¸°

## âœ… Nginxì˜ ê¸°ë³¸ì ì¸ ë¬¸ë²•ì„ ì•Œì•„ì•¼ í•˜ëŠ” ì´ìœ 
Nginxë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰ì‹œí‚¤ë©´ ì•„ë˜ì™€ ê°™ì€ ì›¹ í˜ì´ì§€ê°€ ëœ¬ë‹¤.

í•˜ì§€ë§Œ ì•„ë˜ ì›¹ í˜ì´ì§€ê°€ ì•„ë‹Œ ìš°ë¦¬ê°€ ì§ì ‘ ë§Œë“  ì›¹ í˜ì´ì§€ë¥¼ ë„ìš°ê³  ì‹¶ì„ ê²ƒì´ë‹¤.

ê·¸ëŸ¬ë ¤ë©´ Nginxì˜ ê¸°ë³¸ì ì¸ ë¬¸ë²•ì„ ì–´ëŠ ì •ë„ ì•Œê³  ìˆì–´ì•¼, ì„¤ì •ê°’ì„ ì§ì ‘ ìˆ˜ì •í•´ì„œ ì‘ìš©í•  ìˆ˜ ìˆë‹¤.

<br>

## âœ… Nginxì˜ ì„¤ì • íŒŒì¼ ìœ„ì¹˜

### 1. /etc/nginx/nginx.conf

    Nginxì—ì„œ ê°€ì¥ ê·¼ë³¸ì´ ë˜ëŠ” ì„¤ì • íŒŒì¼(ë£¨íŠ¸ ì„¤ì • íŒŒì¼)

ì „ì—­ì ìœ¼ë¡œ ì„¤ì •ë˜ì–´ì•¼ í•˜ëŠ” ë‚´ìš©(ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ ê°œìˆ˜, ë¡œê·¸ ì €ì¥ ìœ„ì¹˜ ë“±)ì´ í¬í•¨ë˜ì–´ ìˆë‹¤.

<br>

### 2. /etc/nginx/conf.d/default.conf

    ê¸°ë³¸ ì›¹ ì„œë²„(Web Server) ì„¤ì • íŒŒì¼

ì´ë ‡ê²Œ í¬ê²Œ 2ê°€ì§€ ì„¤ì • íŒŒì¼ì´ ì¡´ì¬í•œë‹¤.

ì—¬ê¸°ì„œ /etc/nginx/conf.d/default.conf íŒŒì¼ ìœ„ì£¼ë¡œ ì½”ë“œë¥¼ í•´ì„í•´ë³´ì.

<br>

## âœ… ê¸°ë³¸ì ì¸ Nginx ë¬¸ë²• í•´ì„

`/etc/nginx/conf.d/default.conf`

```bash
# server : 'í•˜ë‚˜ì˜ ì›¹ ì‚¬ì´íŠ¸ì— ê´€ë ¨ëœ ì„¤ì •'ì„ ê´€ë¦¬í•˜ëŠ” ë‹¨ìœ„ ('server ë¸”ëŸ­'ì´ë¼ê³  ë¶€ë¦„)
server {
    # localhost:80ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì´ server ë¸”ëŸ­ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •
    # (server_nameì´ ì¼ì¹˜í•˜ëŠ” server ë¸”ëŸ­ì´ ì—†ëŠ” ê²½ìš° ì²« ë²ˆì§¸ ì •ì˜ë˜ì–´ ìˆëŠ” server ë¸”ëŸ­ì„ ê¸°ë°˜ìœ¼ë¡œ ì²˜ë¦¬)
    # (ì•„ì§ì€ ì •í™•íˆ ëª°ë¼ë„ ëœë‹¤. ë‚˜ì¤‘ì— 'ë©€í‹° ë„ë©”ì¸' ê¸°ëŠ¥ì„ ë°°ìš°ë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë‹¤.)
    listen 80;
    server_name localhost;

    # / ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ëª¨ë“  ê²½ë¡œë¥¼ ì²˜ë¦¬ (ex. /index.html)
    location / {
        # /jscode.htmlë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ /usr/share/nginx/html/jscode.html íŒŒì¼ë¡œ ì‘ë‹µ
        root /usr/share/nginx/html;

        # /ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ /usr/share/nginx/html/index.htmlë¡œ ì‘ë‹µ
        # ë§Œì•½ /usr/share/nginx/html/index.htmlì´ ì—†ì„ ê²½ìš°, /usr/share/nginx/html/index.htmìœ¼ë¡œ ì‘ë‹µ
        index index.html index.htm;
    }

    # Nginxì—ì„œ 500, 502, 503, 504ì˜ ìƒíƒœ ì½”ë“œê°€ ë°œìƒí–ˆì„ ë•Œ /50x.htmlë¡œ redirect
    error_page 500 502 503 504 /50x.html;

    # /50x.htmlê³¼ ì™„ì „íˆ ì¼ì¹˜í•˜ëŠ” ê²½ë¡œë¥¼ ì²˜ë¦¬
    location = /50x.html {
        # /50x.htmlë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ /usr/share/nginx/html/50x.html íŒŒì¼ë¡œ ì‘ë‹µ
        root /usr/share/nginx/html;
    }
}

```
#### ì£¼ì˜)

 â€˜ì¤‘ê´„í˜¸( {...} ) í˜•íƒœì˜ êµ¬ë¬¸â€™ê³¼ â€˜ì„¸ë¯¸ ì½œë¡ ( ; )ìœ¼ë¡œ ëë‚˜ëŠ” êµ¬ë¬¸â€™ 2ê°€ì§€ê°€ ìˆë‹¤.
 
 ì„¤ì • íŒŒì¼ì„ ì‘ì„±í•  ë•Œ ì„¸ë¯¸ ì½œë¡ ( ; )ì„ ë¹ íŠ¸ë ¤ì„œ ì—ëŸ¬ê°€ ëœ¨ëŠ” ê²½ìš°ê°€ ë§ìœ¼ë‹ˆ ì£¼ì˜. 

---

<br>
<br>
<br>

# Nginx ê¸°ë³¸ ë¬¸ë²• ì‘ìš©í•´ë³´ê¸° - 1
 
ê¸°ë³¸ ë¬¸ë²•ì„ í•´ì„í•˜ê³  ì •ë¦¬í–ˆë‹¤ë©´ í•˜ë‚˜ì”© ë°”ê¿”ê°€ë©´ì„œ ì‘ìš©í•´ë´ì•¼ í•œë‹¤.

ì´ë ‡ê²Œë„ ê°€ì§€ê³  ë†€ì•„ë³´ê³ , ì €ë ‡ê²Œë„ ê°€ì§€ê³  ë†€ì•„ë´ì•¼ í•œë‹¤.

ê·¸ëŸ¬ë©´ì„œ ì½”ë“œë¥¼ í•˜ë‚˜ì”© ìˆ˜ì •í•˜ë©´ì„œ ì˜ë„í•œëŒ€ë¡œ ì‘ë™í•˜ëŠ” ì§€ ëˆˆìœ¼ë¡œ í™•ì¸í•˜ëŠ” ì‘ì—…ì„ ë°˜ë“œì‹œ ê±°ì³ì•¼ í•œë‹¤.

ì´ë ‡ê²Œ í•™ìŠµí•˜ë©´ ì •ë§ ë¹ ë¥´ê²Œ ë°°ìš¸ ìˆ˜ ìˆë‹¤.

## âœ… Nginx ê¸°ë³¸ ì›¹ ì‚¬ì´íŠ¸ ìˆ˜ì •í•´ë³´ê¸°

### 1. ì„¤ì • íŒŒì¼ í™•ì¸í•˜ê¸°
```
$ cd /etc/nginx/conf.d/default.conf
```

<br>

`/etc/nginx/conf.d/default.conf`

```bash
server {
    listen 80;
    server_name localhost;
    location / {
        root /usr/share/nginx/html;
        index index.html index.htm;
    }

    # / ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ëª¨ë“  ê²½ë¡œë¥¼ ì²˜ë¦¬ (ex. /index.html)
    location / {
    
        # /jscode.htmlë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ /usr/share/nginx/html/jscode.html íŒŒì¼ë¡œ ì‘ë‹µ
        root /usr/share/nginx/html;

        # /ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ /usr/share/nginx/html/index.htmlë¡œ ì‘ë‹µ
        # ë§Œì•½ /usr/share/nginx/html/index.htmlì´ ì—†ì„ ê²½ìš°, /usr/share/nginx/html/index.htmìœ¼ë¡œ ì‘ë‹µ
        index index.html index.htm;
    }

    error_page 500 502 503 504 /50x.html;

    location = /50x.html {
        root /usr/share/nginx/html;
    }
}
```

### 2. ê¸°ì¡´ ì›¹ í˜ì´ì§€ ì ‘ì†í•´ë³´ê¸°

http://{EC2 IP ì£¼ì†Œ} ë¡œ ì ‘ì†.


### 3. ê¸°ë³¸ ì›¹ í˜ì´ì§€ ìˆ˜ì •í•˜ê¸°

```
$ cd /usr/share/nginx/html
$ sudo vi index.html
```

<br>

`/usr/share/nginx/html/index.html`

```html
<!DOCTYPE html>
<html>
    <head>
        <title>Welcome to nginx!</title>
        <style>
        html { color-scheme: light dark; }
        body { width: 35em; margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif; }
    </style>
    </head>
    <body>
        <h1>Welcome to JSCODE!</h1>
        <p>If you see this page, the nginx web server is successfully installed and
        working. Further configuration is required.</p>
        <p>For online documentation and support please refer to
        <a href="http://nginx.org/">nginx.org</a>.<br/>
        Commercial support is available at
        <a href="http://nginx.com/">nginx.com</a>.</p>
        <p><em>Thank you for using nginx.</em></p>
    </body>
</html>
```

### 4. ì›¹ í˜ì´ì§€ê°€ ìˆ˜ì •ëëŠ” ì§€ í™•ì¸í•˜ê¸°

http://{EC2 IP ì£¼ì†Œ} ë¡œ ì ‘ì†

---

<br>
<br>
<br>

# Nginx ê¸°ë³¸ ë¬¸ë²• ì‘ìš©í•´ë³´ê¸° - 2

## âœ… Nginx ì—ëŸ¬ í˜ì´ì§€ ìˆ˜ì •í•´ë³´ê¸°

### 1. ì„¤ì • íŒŒì¼ í™•ì¸í•˜ê¸°

```
$ cd /etc/nginx/conf.d/default.conf`
```

`/etc/nginx/conf.d/default.conf`
```bash
server {
    listen 80;
    server_name localhost;
    location / {
        root /usr/share/nginx/html;
        index index.html index.htm;
    }

    error_page 500 502 503 504 /50x.html;

    # /50x.htmlê³¼ ì™„ì „íˆ ì¼ì¹˜í•˜ëŠ” ê²½ë¡œë¥¼ ì²˜ë¦¬
    location = /50x.html {
        # /50x.htmlë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ /usr/share/nginx/html/50x.html íŒŒì¼ë¡œ ì‘ë‹µ
        root /usr/share/nginx/html;
    }
}
```

### 2. ê¸°ì¡´ ì—ëŸ¬ í˜ì´ì§€ ì ‘ì†í•´ë³´ê¸°

http://{EC2 IP ì£¼ì†Œ} ë¡œ ì ‘ì†

<br>

### 3. ê¸°ë³¸ ì—ëŸ¬ í˜ì´ì§€ ìˆ˜ì •í•˜ê¸°

```
$ cd /usr/share/nginx/html
$ sudo vi 50x.html
```

`/usr/share/nginx/html/50x.html`

```html
<!DOCTYPE html>
<html>
    <head>
        <title>Error</title>
        <style>
        html { color-scheme: light dark; }
        body { width: 35em; margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif; }
        </style>
    </head>
    <body>
        <h1>Error!</h1>
        <p>Sorry, the page you are looking for is currently unavailable.<br/>
        Please try again later.</p>
        <p>If you are the system administrator of this resource then you should check
        the error log for details.</p>
        <p><em>Faithfully yours, nginx.</em></p>
    </body>
</html>
```

### 4. ì—ëŸ¬ í˜ì´ì§€ê°€ ìˆ˜ì •ëëŠ” ì§€ í™•ì¸í•˜ê¸°

http://{EC2 IP ì£¼ì†Œ}/50x.html ë¡œ ì ‘ì†


<br>
<br>
<br>

# Nginx ê¸°ë³¸ ë¬¸ë²• ì‘ìš©í•´ë³´ê¸° - 2

## âœ… Nginxì˜ ê¸°ë³¸ ì›¹ í˜ì´ì§€ë¥¼ Hello World í˜ì´ì§€ë¡œ ë°”ê¿”ë³´ê¸°

ì‚¬ìš©ìê°€ / ë¼ëŠ” ì£¼ì†Œë¡œ ì ‘ì†í–ˆì„ ë•Œ /usr/share/nginx/html/index.html í˜ì´ì§€ê°€ ì•„ë‹ˆë¼, /usr/share/nginx/html/hello.html í˜ì´ì§€ë¡œ ì‘ë‹µí•˜ë„ë¡ ë°”ê¿”ë³´ì.

<br>

### 1. Hello World í˜ì´ì§€ ë§Œë“¤ê¸°

```
$ cd /usr/share/nginx/html
$ sudo vi hello.html
```

`hello.html`

```html
<h1>Hello World!</h1>
```

<br>

### 2. Nginx ì„¤ì • íŒŒì¼ ìˆ˜ì •í•˜ê¸°

```
$ cd /etc/nginx/conf.d
$ sudo vi default.conf
```

`/etc/nginx/conf.d/default.conf`

```cmd
server {
    listen 80;
    server_name localhost;

    location / {
        # /ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ /usr/share/nginx/html/hello.htmlë¡œ ì‘ë‹µ
        root /usr/share/nginx/html;
        index hello.html
    }

    error_page 500 502 503 504 /50x.html;

    location = /50x.html {
        root /usr/share/nginx/html;
    }
}
```

<br>

### 3. Nginx ì„¤ì • íŒŒì¼ ë¬¸ë²• ì—ëŸ¬ìˆëŠ” ì§€ í™•ì¸í•˜ê¸°

```
# Nginx ì„¤ì • íŒŒì¼ ì¤‘ ë¬¸ë²• ì—ëŸ¬ê°€ ìˆëŠ” ì§€ ì²´í¬
$ sudo nginx -t
```

<br>

### 4. ë¬¸ë²• ì—ëŸ¬ ê³ ì¹˜ê¸°

```cmd
server {
    listen 80;
    server_name localhost;
    
    location / {
        root /usr/share/nginx/html;
        index hello.html;
    }
    
    error_page 500 502 503 504 /50x.html;

    location = /50x.html {
        root /usr/share/nginx/html;
    }
}
```

<br>

### 5. ë³€ê²½ëœ Nginx ì„¤ì • íŒŒì¼ ë°˜ì˜í•˜ê¸°


```cmd
# Nginx ì„¤ì • íŒŒì¼ ì¤‘ ë¬¸ë²• ì—ëŸ¬ê°€ ìˆëŠ” ì§€ ì²´í¬
$ sudo nginx -t

# Nginxì˜ ì„¤ì • íŒŒì¼ì´ ë°”ë€ ê²½ìš° ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤˜ì•¼ ì„¤ì • íŒŒì¼ì´ ë°˜ì˜ëœë‹¤.
$ sudo nginx -s reload
```

<br>

### 6. ì›¹ í˜ì´ì§€ì— ì ‘ì†í•´ë³´ê¸°

Nginxì˜ ì„¤ì •ì´ ì˜ ì ìš©ëëŠ” ì§€ http://{EC2 IP ì£¼ì†Œ} ì£¼ì†Œë¡œ ì ‘ì†

<br>
<br>
<br>

# Nginx ë””ë²„ê¹… ë°©ë²•
 ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ì—ëŸ¬ë¥¼ ë””ë²„ê¹…í•˜ê³  í•´ê²°í•˜ëŠ” ë°ì—ë§Œ ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì„ ì“´ë‹¤.
 
 ë”°ë¼ì„œ ì–´ë–¤ ê¸°ìˆ ì„ ìµí ë•Œ ë°˜ë“œì‹œ ì—ëŸ¬ë¥¼ ë””ë²„ê¹… í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì •ë¦¬í•´ë‘ì–´ì•¼ í•œë‹¤.

## âœ… ì—ëŸ¬ ìƒí™©

`/etc/nginx/conf.d/default.conf`

```bash
server {
    listen 80;
    server_name localhost;
    location / {
        root /usr/share/nginx/htlm;
        index hello.html;
    }
    error_page 500 502 503 504 /50x.html;

    location = /50x.html {
        root /usr/share/nginx/html;
    }
}
```

ìœ„ ì½”ë“œì—ì„œ /usr/share/nginx/html ì´ë¼ê³  ì‘ì„±í•´ì•¼ í•˜ëŠ” ê±¸, ì‹¤ìˆ˜ë¡œ /usr/share/nginx/htlm ë¡œ ì‘ì„±í–ˆë‹¤ê³  ê°€ì •í•´ë³´ì.

ì´ ìƒí™©ì—ì„œ ì—ëŸ¬ë¥¼ ì–´ë–»ê²Œ ë””ë²„ê¹…í•´ì•¼ í•˜ëŠ” ì§€ ì•Œì•„ë³´ì.

<br>

## âœ… Nginx ì—ëŸ¬ ë””ë²„ê¹… ë°©ë²•

### 1. Nginxê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ìˆëŠ” ì§€ ì²´í¬

```bash
$ sudo systemctl status nginx
```

<br>

### 2. ë¬¸ë²• ì—ëŸ¬ ì²´í¬í•˜ê¸°

```bash
$ sudo nginx -t
```

<br>

### 3. ë¡œê·¸ íŒŒì¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ê¸°
```bash
# ì œëŒ€ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ìˆëŠ” ì§€ í™•ì¸
$ sudo tail -f /var/log/nginx/access.log

# ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
$ sudo tail -f /var/log/nginx/error.log
```

<br>
<br>
<br>

# ì›¹ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸(HTML, CSS, JS) ë°°í¬í•˜ê¸°

## âœ… ì›¹ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸(HTML, CSS, JS) ë°°í¬í•˜ê¸°
 
### 1. HTML, CSS, JS ì›¹ í”„ë¡œì íŠ¸ë¥¼ EC2ë¡œ ê°€ì ¸ì˜¤ê¸°

```bash
$ cd /usr/share/nginx
$ sudo git clone https://github.com/JSCODE-COURSE/nginx-frontend-html.git
```

### 2. Nginx ì„¤ì • íŒŒì¼ ìˆ˜ì •í•˜ê¸°

```bash
$ cd /etc/nginx/conf.d
$ sudo vi default.conf
```

`/etc/nginx/conf.d/default.conf`

```bash
server {
    listen 80;
    server_name localhost;
    location / {
        root /usr/share/nginx/nginx-frontend-html;
        index index.html;
    }
    error_page 500 502 503 504 /50x.html;

    location = /50x.html {
    root /usr/share/nginx/html;
    }
}
```

### 3. Nginx ì„¤ì • íŒŒì¼ ë°˜ì˜í•˜ê¸°

```bash
# Nginx ì„¤ì • íŒŒì¼ ì¤‘ ë¬¸ë²• ì—ëŸ¬ê°€ ìˆëŠ” ì§€ ì²´í¬
$ sudo nginx -t

# Nginxì˜ ì„¤ì • íŒŒì¼ì´ ë°”ë€ ê²½ìš° ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤˜ì•¼ ì„¤ì • íŒŒì¼ì´ ë°˜ì˜ëœë‹¤.
$ sudo nginx -s reload
```

### 4. ì›¹ í˜ì´ì§€ ì ‘ì†í•´ë³´ê¸°

- Nginxì˜ ì„¤ì •ì´ ì˜ ì ìš©ëëŠ” ì§€ http://{EC2 IP ì£¼ì†Œ} ì£¼ì†Œë¡œ ì ‘ì†í•˜ê¸° 

---

<br>
<br>
<br>

# ì›¹ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸(React + Vite) ë°°í¬í•˜ê¸°

## âœ… ì›¹ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸(React + Vite) ë°°í¬í•˜ê¸°
 ì´ì „ì— ì›¹ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì™„ì„±ì‹œì¼œì„œ Github Repositoryì— ì˜¬ë ¤ë’€ë‹¤ê³  ê°€ì •í•˜ì.


### 1. React í”„ë¡œì íŠ¸ë¥¼ EC2ë¡œ ê°€ì ¸ì˜¤ê¸°

```bash
$ cd /usr/share/nginx
$ sudo git clone https://github.com/JSCODE-COURSE/nginx-frontend-react.git
```

### 2. React í”„ë¡œì íŠ¸ ë¹Œë“œë¥¼ ìœ„í•´ Node.js ì„¤ì¹˜í•˜ê¸°

```bash
$ sudo apt-get update && \
sudo apt-get install -y ca-certificates curl gnupg && \
sudo mkdir -p /etc/apt/keyrings && \
curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/
NODE_MAJOR=20 && \
echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_$NODE_MAJOR.x nodis
sudo apt-get update && \
sudo apt-get install nodejs -y

# Node.jsê°€ ì˜ ì„¤ì¹˜ëëŠ” ì§€ í™•ì¸í•˜ê¸°
$ node -v
```

### 3. React í”„ë¡œì íŠ¸ ë¹Œë“œí•˜ê¸°

```bash
$ cd nginx-frontend-react
$ sudo npm i
$ sudo npm run build
```

### 4. Nginx ì„¤ì • íŒŒì¼ ìˆ˜ì •í•˜ê¸°

```bash
$ cd /etc/nginx/conf.d
$ sudo vi default.conf
```

<br>

`/etc/nginx/conf.d/default.conf`

```bash
server {
    listen 80;
    server_name localhost;
    location / {
        root /usr/share/nginx/nginx-frontend-react/dist;
        index index.html;
    }
    error_page 500 502 503 504 /50x.html;

    location = /50x.html {
        root /usr/share/nginx/html;
    }
}
```

### 5. Nginx ì„¤ì • íŒŒì¼ ë°˜ì˜í•˜ê¸°

```bash
# Nginx ì„¤ì • íŒŒì¼ ì¤‘ ë¬¸ë²• ì—ëŸ¬ê°€ ìˆëŠ” ì§€ ì²´í¬
$ sudo nginx -t

# Nginxì˜ ì„¤ì • íŒŒì¼ì´ ë°”ë€ ê²½ìš° ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤˜ì•¼ ì„¤ì • íŒŒì¼ì´ ë°˜ì˜ëœë‹¤.
$ sudo nginx -s reload
```

### 5. ì›¹ í˜ì´ì§€ ì ‘ì†í•´ë³´ê¸°
Nginxì˜ ì„¤ì •ì´ ì˜ ì ìš©ëëŠ” ì§€ http://{EC2 IP ì£¼ì†Œ} ì£¼ì†Œë¡œ ì ‘ì†í•´ì„œ í™•ì¸í•˜ê¸°

<br>
<br>
<br>

# ì›¹ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸(Next.js) ë°°í¬í•˜ê¸°

## âœ… ì›¹ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸(Next.js) ë°°í¬í•˜ê¸°
 ì´ì „ì— ì›¹ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì™„ì„±ì‹œì¼œì„œ Github Repositoryì— ì˜¬ë ¤ë’€ë‹¤ê³  ê°€ì •í•˜ì.

### 1. Next.js í”„ë¡œì íŠ¸ë¥¼ EC2ë¡œ ê°€ì ¸ì˜¤ê¸°

```bash
$ cd /usr/share/nginx
$ sudo git clone https://github.com/JSCODE-COURSE/nginx-frontend-next.git
```

### 2. Next.js í”„ë¡œì íŠ¸ ë¹Œë“œë¥¼ ìœ„í•´ Node.js ì„¤ì¹˜í•˜ê¸°
(ì´ì „ ì‹¤ìŠµì—ì„œ ì„¤ì¹˜í•¨)

### 3. Next.js í”„ë¡œì íŠ¸ ë¹Œë“œí•˜ê¸°
$ cd nginx-frontend-next
$ sudo npm i
$ sudo npn run build
ì£¼ì˜) ë¹Œë“œí•œ ê²°ê³¼ë¬¼ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ë ¤ë©´ ë°˜ë“œì‹œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì•¼ í•œë‹¤.
next.config.mjs
/** @type {import('next').NextConfig} */
const nextConfig = {
 output: 'export'
};
export default nextConfig;

### 4. Nginx ì„¤ì • íŒŒì¼ ìˆ˜ì •í•˜ê¸°
```bash
$ cd /etc/nginx/conf.d
$ sudo vi default.conf
```

<br>

`/etc/nginx/conf.d/default.conf`
```bash
server {
    listen 80;
    server_name localhost;
    location / {
        root /usr/share/nginx/nginx-frontend-next/out;
        index index.html;
    }
    error_page 500 502 503 504 /50x.html;

    location = /50x.html {
        root /usr/share/nginx/html;
    }
}
```

### 5. Nginx ì„¤ì • íŒŒì¼ ë°˜ì˜í•˜ê¸°
```bash
# Nginx ì„¤ì • íŒŒì¼ ì¤‘ ë¬¸ë²• ì—ëŸ¬ê°€ ìˆëŠ” ì§€ ì²´í¬
$ sudo nginx -t

# Nginxì˜ ì„¤ì • íŒŒì¼ì´ ë°”ë€ ê²½ìš° ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤˜ì•¼ ì„¤ì • íŒŒì¼ì´ ë°˜ì˜ëœë‹¤.
$ sudo nginx -s reload
```

### 6. ì›¹ í˜ì´ì§€ ì ‘ì†í•´ë³´ê¸°
Nginxì˜ ì„¤ì •ì´ ì˜ ì ìš©ëëŠ” ì§€ http://{EC2 IP ì£¼ì†Œ} ì£¼ì†Œë¡œ ì ‘ì†

<br>
<br>
<br>

# ğŸ“–HTTPSë¥¼ ì™œ ì ìš©ì‹œì¼œì•¼ í• ê¹Œ?

## âœ… HTTPSë¥¼ ì™œ ì ìš©ì‹œì¼œì•¼ í• ê¹Œ?

### 1. ë³´ì•ˆì ì¸ ì´ìœ 
ë°ì´í„°ë¥¼ ì„œë²„ì™€ ì£¼ê³  ë°›ì„ ë•Œ ì•”í˜¸í™”ë¥¼ ì‹œì¼œì„œ í†µì‹ ì„ í•œë‹¤.

ì•”í˜¸í™”ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ ëˆ„êµ°ê°€ ì¤‘ê°„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ë¡œì±„ì„œ í•´í‚¹í•  ìˆ˜ë„ ìˆë‹¤.

ë³´ì•ˆì— ì¢‹ì§€ ì•Šë‹¤.

### 2. ì‚¬ìš©ì ì´íƒˆ
ì–´ë–¤ ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°”ëŠ”ë° ì•„ë˜ì™€ ê°™ì´ ë³´ì¸ë‹¤ë©´ ì™ ì§€ ë¯¿ìŒì§ìŠ¤ëŸ½ì§€ ëª»í•œ ì‚¬ì´íŠ¸ë¼ê³  ìƒê°í•  ê²ƒì´ë‹¤.

## âœ… í˜„ì—…ì—ì„œëŠ” ?
ëŒ€ë¶€ë¶„ì˜ ì›¹ ì‚¬ì´íŠ¸ì—ì„œ HTTPSë¥¼ ì ìš©ì‹œí‚¨ë‹¤.

## âœ… Nginxë¥¼ í™œìš©í•œ HTTPS ì ìš©
Nginxê°€ ì‚¬ìš©ì(í´ë¼ì´ì–¸íŠ¸)ì™€ í†µì‹ í•  ë•Œ, HTTPSë¥¼ í™œìš©í•´ ì•”í˜¸í™” ëœ ì •ë³´ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤. 

![alt text](image-10.png)

<br>
<br>
<br>

# Nginx, Certbotì„ í™œìš©í•´ HTTPS ì ìš©ì‹œí‚¤ê¸°

ì°¸ê³  ë¬¸ì„œ : https://certbot.eff.org/instructions?ws=nginx&os=snap

## 1. Certbot ì„¤ì¹˜í•˜ê¸°

```bash
$ sudo snap install --classic certbot
$ sudo ln -s /snap/bin/certbot /usr/bin/certbot
```

## 2. HTTPS ì¸ì¦ì„œ ë°œê¸‰ë°›ê¸°

```bash
$ sudo certbot --nginx -d <ë„ë©”ì¸ ì£¼ì†Œ>

# ì˜ˆì‹œ
$ sudo certbot --nginx -d jscode.p-e.kr
$ sudo certbot --nginx -d admin.jscode.p-e.kr
```

** ë°˜ë“œì‹œ ë„ë©”ì¸ì„ ë¨¼ì € ì—°ê²°í•œ ë’¤ì— ìœ„ ëª…ë ¹ì–´ë¥¼ ì³ì•¼ ì •ìƒ ì‘ë™í•œë‹¤.
## 3. HTTPS ì˜ ì ìš©ëëŠ” ì§€ í™•ì¸í•˜ê¸°

<br>
<br>
<br>

# ğŸ“– Nginx, Certbotì´ ì‘ì„±í•œ HTTPS ê´€ë ¨ ì½”ë“œ í•´ì„í•˜ê¸°

 Certbotì´ ì‘ì„±í•œ ì•„ë˜ ì½”ë“œëŠ” ì§ì ‘ ì‘ì„±í•  ìˆ˜ ìˆì„ í•„ìš”ê¹Œì§€ëŠ” ì—†ë‹¤. ë‹¤ë§Œ, ëŒ€ëµì ìœ¼ë¡œ ì–´ë–¤ ì˜ë¯¸ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì§€ í•´ì„í•  ìˆ˜ëŠ” ìˆì–´ì•¼ í•œë‹¤.

`/etc/nginx/conf.d/default.conf`

```bash
# server ë¸”ë¡ì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ listen, server_nameì„ ê°€ì¥ ë¨¼ì € ì²˜ë¦¬í•œë‹¤.
server {
    # jscode.p-e.kr ì£¼ì†Œë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì´ë©´ì„œ
    # 443ë²ˆ í¬íŠ¸(https)ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì¼ ë•Œ
    # ì´ server ë¸”ëŸ­ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •
    server_name jscode.p-e.kr;
    location / {
        root /usr/share/nginx/nginx-frontend-react/dist;
        index index.html;
    }
    listen 443 ssl; # managed by Certbot

    # (HTTPS ì²˜ë¦¬ ê³¼ì •ì— í•„ìš”í•œ ë¡œì§ -> ìì„¸íˆëŠ” ëª°ë¼ë„ ë¨)
    ssl_certificate /etc/letsencrypt/live/jscode.p-e.kr/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/jscode.p-e.kr/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
}

server {
    # admin.jscode.p-e.kr ì£¼ì†Œë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì´ë©´ì„œ
    # 443ë²ˆ í¬íŠ¸(https)ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì¼ ë•Œ
    # ì´ server ë¸”ëŸ­ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •
    server_name admin.jscode.p-e.kr;
    location / {
        root /usr/share/nginx/nginx-frontend-next/out;
        index index.html;
    }
    listen 443 ssl; # managed by Certbot

    # (HTTPS ì²˜ë¦¬ ê³¼ì •ì— í•„ìš”í•œ ë¡œì§ -> ìì„¸íˆëŠ” ëª°ë¼ë„ ë¨)
    ssl_certificate /etc/letsencrypt/live/admin.jscode.p-e.kr/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/admin.jscode.p-e.kr/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
}

server {
    # 2. ë“¤ì–´ì˜¨ ìš”ì²­ì˜ ì£¼ì†Œì˜ Hostê°€ jscode.p-e.krì¼ ê²½ìš° (ex. http://jscode.p-e.kr/about)
    # https://jscode.p-e.kr/...(ex. https://jscode.p-e.kr/about)ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸(301) ì²˜ë¦¬
    if ($host = jscode.p-e.kr) {
        return 301 https://$host$request_uri;
    } # managed by Certbot

    # 1. jscode.p-e.kr ì£¼ì†Œë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì´ë©´ì„œ
    # 80ë²ˆ í¬íŠ¸(http)ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì¼ ë•Œ
    # ì´ server ë¸”ëŸ­ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •
    listen 80;
    server_name jscode.p-e.kr;

    # 3. ê·¸ ì´ì™¸ì˜ ê²½ìš°ì—ëŠ” 404(Not Found)ë¡œ ì‘ë‹µ
    return 404; # managed by Certbot
}

server {
        # 2. ë“¤ì–´ì˜¨ ìš”ì²­ì˜ ì£¼ì†Œì˜ Hostê°€ admin.jscode.p-e.krì¼ ê²½ìš° (ex. http://admin.jscode.p-e.kr/about)
        # https://admin.jscode.p-e.kr/...(ex. https://admin.jscode.p-e.kr/about)ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸(301) ì²˜ë¦¬
        if ($host = admin.jscode.p-e.kr) {
        return 301 https://$host$request_uri;
        } # managed by Certbot
        # 1. adminjscode.p-e.kr ì£¼ì†Œë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì´ë©´ì„œ
        # 80ë²ˆ í¬íŠ¸(http)ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì¼ ë•Œ
        # ì´ server ë¸”ëŸ­ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •
        listen 80;
        server_name admin.jscode.p-e.kr;

        # 3. ê·¸ ì´ì™¸ì˜ ê²½ìš°ì—ëŠ” 404(Not Found)ë¡œ ì‘ë‹µ
        return 404; # managed by Certbot
}
```
## âœ… HTTPë¡œ ìš”ì²­ ë³´ë‚´ë³´ê¸°, HTTPSë¡œ ìš”ì²­ ë³´ë‚´ë³´ê¸°

### 1. HTTPë¡œ ìš”ì²­ ë³´ë‚´ê¸°
Nginx, Certbotì´ ì‘ì„±í•œ HTTPS ê´€ë ¨ ì½”ë“œ í•´ì„í•˜ê¸° 2
http:// ë¥¼ ëª…ì‹œí•´ì„œ ìš”ì²­ì„ ë³´ë‚´ë©´ ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ 80ë²ˆ í¬íŠ¸ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. http:// ìš”ì²­ì„ ë³´ë‚´ë³´ë©´ Nginxì˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì„¤ì • ë•Œ
ë¬¸ì— https:// ë¡œ ë³€ê²½ë˜ì–´ ì ‘ì†ì´ ëœë‹¤.

### 2. HTTPSë¡œ ìš”ì²­ ë³´ë‚´ê¸°
https:// ë¥¼ ëª…ì‹œí•´ì„œ ìš”ì²­ì„ ë³´ë‚´ë©´ ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ 443ë²ˆ í¬íŠ¸ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.

### 3. HTTP, HTTPSë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‘ì„±í•˜ì§€ ì•Šê³  ìš”ì²­ ë³´ë‚´ê¸°
Nginx, Certbotì´ ì‘ì„±í•œ HTTPS ê´€ë ¨ ì½”ë“œ í•´ì„í•˜ê¸° 3
http:// ë˜ëŠ” https:// ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šê³  ìš”ì²­ì„ ë³´ë‚´ë©´, ë¸Œë¼ìš°ì €ëŠ” ìë™ìœ¼ë¡œ HTTP(80ë²ˆ í¬íŠ¸)ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. í•˜ì§€ë§Œ Nginxì˜ ì„¤ì •ì—
ë”°ë¼ HTTP(80ë²ˆ í¬íŠ¸)ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ì–´ https:// ë¡œ ë³€ê²½ë˜ì–´ ì ‘ì†ì´ ëœë‹¤.

<br>
<br>
<br>

# ğŸ“– ì„¤ì • íŒŒì¼ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê¸° (include)

## âœ… ì„¤ì • íŒŒì¼ì„ ë¶„ë¦¬í•´ì•¼ í•˜ëŠ” ì´ìœ 
ì§€ê¸ˆê¹Œì§€ ì…‹íŒ…ëœ ì„¤ì • ê´€ë ¨ ì½”ë“œë§Œìœ¼ë¡œë„ ê½¤ ë³µì¡í•´ì¡Œë‹¤.

`default.conf`

```bash
server {
    server_name jscode.p-e.kr;
    location / {
        root /usr/share/nginx/nginx-frontend-react/dist;
        index index.html;
    }

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/jscode.p-e.kr/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/jscode.p-e.kr/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
}

server {
    server_name admin.jscode.p-e.kr;
    location / {
        root /usr/share/nginx/nginx-frontend-next/out;
        index index.html;
    }

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/admin.jscode.p-e.kr/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/admin.jscode.p-e.kr/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
}

server {
    if ($host = jscode.p-e.kr) {
        return 301 https://$host$request_uri;
    } # managed by Certbot
    listen 80;
    server_name jscode.p-e.kr;
    return 404; # managed by Certbot
}

server {
    if ($host = admin.jscode.p-e.kr) {
        return 301 https://$host$request_uri;
    } # managed by Certbot
    listen 80;
    server_name admin.jscode.p-e.kr;
    return 404; # managed by Certbot
}
```
ì„œë¹„ìŠ¤ê°€ ì»¤ì§€ë©´ ì»¤ì§ˆìˆ˜ë¡ ì•„ë˜ ì„¤ì • íŒŒì¼ë„ ì ì  ë” ê±°ëŒ€í•´ì§ˆ ê²ƒì´ë‹¤.

í•œ íŒŒì¼ì— ë„ˆë¬´ ë§ì€ ì½”ë“œê°€ ë‹´ê²¨ìˆìœ¼ë©´ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§„ë‹¤.

ì´ê±¸ í•´ê²°í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë¶„ë¦¬í•´ì„œ ì„¤ì • íŒŒì¼ë“¤ì„ ê´€ë¦¬í•´ë³´ì.

## âœ… ì„¤ì • íŒŒì¼ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê¸°

### 1. í´ë” ë§Œë“¤ê¸°

```bash
$ cd /etc/nginx/conf.d
$ sudo mkdir websites
```

### 2. ì„¤ì • íŒŒì¼ ë¶„ë¦¬í•˜ê¸°
/etc/nginx/conf.d/default.conf íŒŒì¼ì— ìˆëŠ” ì½”ë“œ ë‚´ìš©ì„ ê° íŒŒì¼ì— ë¶„ë¦¬í•´ì„œ ë„£ëŠ”ë‹¤.

<br>

`/etc/nginx/conf.d/websites/jscode.p-e.kr.conf`

```bash
server {
    server_name jscode.p-e.kr;
    location / {
        root /usr/share/nginx/nginx-frontend-react/dist;
        index index.html;
    }
    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/jscode.p-e.kr/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/jscode.p-e.kr/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
}

server {
    if ($host = jscode.p-e.kr) {
        return 301 https://$host$request_uri;
    } # managed by Certbot
    listen 80;
    server_name jscode.p-e.kr;
    return 404; # managed by Certbot
}
```

<br>

`/etc/nginx/conf.d/websites/admin.jscode.p-e.kr.conf`

```bash
server {
    server_name admin.jscode.p-e.kr;
    location / {
        root /usr/share/nginx/nginx-frontend-next/out;
        index index.html;
    }
    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/admin.jscode.p-e.kr/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/admin.jscode.p-e.kr/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
}

server {
    if ($host = admin.jscode.p-e.kr) {
        return 301 https://$host$request_uri;
    } # managed by Certbot

    listen 80;
    server_name admin.jscode.p-e.kr;
    return 404; # managed by Certbot
}
```

<br>

### 3. default.conf íŒŒì¼ì—ì„œ ë¶„ë¦¬í•œ ì„¤ì • íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
`/etc/nginx/conf.d/default.conf`

```bash
include conf.d/websites/jscode.p-e.kr.conf;
include conf.d/websites/admin.jscode.p-e.kr.conf;
```

ê¸°ì¤€ ê²½ë¡œê°€ /etc/nginx ì´ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì´ ì£¼ì†Œë¥¼ ì…ë ¥í–ˆë‹¤.

<br>

### 4. ë³€ê²½ëœ Nginx ì„¤ì • íŒŒì¼ ë°˜ì˜í•˜ê¸°

```bash
# Nginx ì„¤ì • íŒŒì¼ ì¤‘ ë¬¸ë²• ì—ëŸ¬ê°€ ìˆëŠ” ì§€ ì²´í¬
$ sudo nginx -t
# Nginxì˜ ì„¤ì • íŒŒì¼ì´ ë°”ë€ ê²½ìš° ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤˜ì•¼ ì„¤ì • íŒŒì¼ì´ ë°˜ì˜ëœë‹¤.
$ sudo nginx -s reload
```

<br>

### 5. ì˜ ì‘ë™í•˜ëŠ” ì§€ í™•ì¸í•˜ê¸°

<br>

### 6. includeë¥¼ í•œ ì¤„ ì‚­ì œí•´ë³´ê¸°
`/etc/nginx/conf.d/default.conf`

```bash
include conf.d/websites/jscode.p-e.kr.conf;
include conf.d/websites/admin.jscode.p-e.kr.conf;

# Nginx ì„¤ì • íŒŒì¼ ì¤‘ ë¬¸ë²• ì—ëŸ¬ê°€ ìˆëŠ” ì§€ ì²´í¬
$ sudo nginx -t
# Nginxì˜ ì„¤ì • íŒŒì¼ì´ ë°”ë€ ê²½ìš° ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤˜ì•¼ ì„¤ì • íŒŒì¼ì´ ë°˜ì˜ëœë‹¤.
$ sudo nginx -s reload
```

<br>

### 7. ì‘ë™ ì•ˆ í•˜ëŠ” ì§€ í™•ì¸í•˜ê¸°

<br>

### 8. ì™€ì¼ë“œì¹´ë“œ(*)ë¥¼ í™œìš©í•´ ì„¤ì • ê°„ê²°í•˜ê²Œ ì¶”ê°€í•˜ê¸°

`/etc/nginx/conf.d/default.conf`

```bash
include conf.d/websites/*.conf;
# Nginx ì„¤ì • íŒŒì¼ ì¤‘ ë¬¸ë²• ì—ëŸ¬ê°€ ìˆëŠ” ì§€ ì²´í¬
$ sudo nginx -t

# Nginxì˜ ì„¤ì • íŒŒì¼ì´ ë°”ë€ ê²½ìš° ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤˜ì•¼ ì„¤ì • íŒŒì¼ì´ ë°˜ì˜ëœë‹¤.
$ sudo nginx -s reload
```

### 9. ì˜ ì‘ë™í•˜ëŠ” ì§€ í™•ì¸í•˜ê¸°